# Создание сервиса авторизации SSO

Сервис авторизации SSO представляет собой gRPC-сервис, построенный с учетом принципов чистой архитектуры. Проект организован таким образом, чтобы обеспечить тестируемость и возможность легкого расширения функциональности.

В основе структуры проекта лежит разделение на логические модули, каждый из которых отвечает за свою часть функциональности. Корневая директория проекта содержит основные конфигурационные файлы и директории с исходным кодом. В директории `cmd/sso` находится точка входа в приложение, где происходит инициализация всех компонентов системы.

Внутренняя логика приложения размещена в директории `internal`, которая разделена на несколько ключевых модулей. Модуль `app` содержит основную логику инициализации приложения, включая настройку логгера, конфигурации и подключения к базе данных. В модуле `config` находятся структуры и методы для работы с конфигурацией приложения, включая загрузку настроек из YAML-файла и переменных окружения.

Модуль `domain` определяет основные сущности системы, такие как пользователь и приложение. Здесь же находятся интерфейсы репозиториев и сервисов, которые определяют контракты для работы с данными и бизнес-логикой. В модуле `storage` реализована работа с SQLite базой данных, включая миграции, создание таблиц и методы для работы с данными.

Бизнес-логика приложения размещена в модуле `services`, где реализованы основные сервисы: аутентификация, регистрация пользователей, управление приложениями и проверка прав доступа. Модуль `lib` содержит общие утилиты, такие как работа с JWT-токенами, валидация данных и другие вспомогательные функции.

В модуле `grpc` находится реализация gRPC-сервера, включая обработчики запросов и middleware. Здесь же определены методы для работы с JWT-токенами и проверки прав доступа. Модуль `clients` содержит реализацию клиентов для взаимодействия с другими сервисами, если это необходимо.

Тесты размещены в директории `tests`, где находятся интеграционные тесты, проверяющие взаимодействие различных компонентов системы. В директории `docs` хранится документация проекта, включая описание архитектуры, API и инструкции по развертыванию.

Конфигурация приложения осуществляется через YAML-файл, который содержит настройки для подключения к базе данных, параметры JWT-токенов, настройки логирования и другие параметры. Система поддерживает гибкую настройку через переменные окружения, что позволяет легко адаптировать её под различные окружения.

Проект использует современные практики разработки, включая:
- Чистую архитектуру для разделения ответственности
- Dependency Injection для управления зависимостями
- Интерфейсы для абстракции реализации
- Логирование через slog
- Валидацию данных
- Обработку ошибок
- Тестирование на разных уровнях

Такая структура обеспечивает:
- Модульность и возможность независимого тестирования компонентов
- Простоту добавления новой функциональности
- Легкость поддержки и отладки
- Безопасность и надежность работы 